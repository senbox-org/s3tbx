<!--
  ~ Copyright (C) 2010 Brockmann Consult GmbH (info@brockmann-consult.de)
  ~
  ~ This program is free software; you can redistribute it and/or modify it
  ~ under the terms of the GNU General Public License as published by the Free
  ~ Software Foundation; either version 3 of the License, or (at your option)
  ~ any later version.
  ~ This program is distributed in the hope that it will be useful, but WITHOUT
  ~ ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  ~ FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
  ~ more details.
  ~
  ~ You should have received a copy of the GNU General Public License along
  ~ with this program; if not, see http://www.gnu.org/licenses/
  -->

<html>
<head>
    <title>SNAP Data Processors - Idepix Envisat MERIS Processor Description</title>
    <link rel="stylesheet" href="../style.css">
</head>

<body>

<table class="header">
    <tr class="header">
        <td class="header">&nbsp;
            SNAP Data Processors - Idepix Envisat MERIS Processor Description
        </td>
        <td class="header" align="right"><a href="nbdocs://org.esa.snap.snap.help/org/esa/snap/snap/help/docs/general/overview/SnapOverview.html"><img src="../images/snap_header.jpg"
                                                                                                                                                       border=0></a>
        </td>
    </tr>
</table>

<!--todo: complete-->
<h3>Processor Description</h3>

<h4>I/O Parameters Tab</h4>

<p align="center"><img src="images/MerisPaths.png"></p>

<h5>Source Product Group</h5>

<p class="i1">
    <b>Name: </b>
    Used to select the spectral source product. The source product shall
    contain spectral bands providing a source spectrum at each pixel. Use the <b>...</b> button to
    open a data product currently not opened in the Sentinel Toolbox.
</p>

<h5>Supported Envisat MERIS Source Products</h5>
The following Envisat MERIS source products are supported for Idepix classification:
<ul>
    <li>
        MERIS_RR__1P*.N1:<br>
        Reduced Resolution Geolocated and Calibrated TOA Radiance (stripline)
    </li>
    <li>
        MERIS_FR__1P*.N1:<br>
        Full Resolution Geolocated and Calibrated TOA Radiance (stripline)
    </li>
</ul>
For detailed product descriptions and file naming conventions see MERIS Product Handbook
(http://envisat.esa.int/handbooks/meris/CNTR.html).


<h5>Target Product Group</h5>

<p class="i1">
    <b>Name:</b>
    Used to specify the name of the target product.
</p>

<p class="i1">
    <b>Save to:</b>
    Used to specify whether the target product should be saved to the file system. The
    combo box presents a list of file formats.
</p>

<p class="i1">
    <b>Open in SNAP:</b>
    Used to specify whether the target product should be opened in the Sentinel Toolbox.
    When the target product is not saved, it is opened in the Sentinel Toolbox automatically.
</p>

<h3>The Processing Parameters</h3>

<p align="center"><img src="images/MerisParameters.png"></p>

<p class="i1">
    <b>Select TOA radiances to write to the target product: </b><br>
    The TOA radiance bands from the source product which shall be written into the target product can be selected here.
    Multiple selection is possible.
</p>

<p class="i1">
    <b>Select TOA reflectances to write to the target product: </b><br>
    The intermediately computed TOA reflectances bands which shall be written into the target product can be selected here.
    Multiple selection is possible.
</p>

<p class="i1">
    <b>Write NN value to the target product: </b><br>
    If selected, the output value of the neural network
    (floating point number on the interval [0.0, 5.0]) is written to the target product. The default is 'false'.
</p>

<p class="i1">
    <b>NN cloud ambiguous lower boundary (applied on WATER): </b><br>
    The boundary of the neural network output value where pixels are regarded as either clear (NN output lower
    than boundary) or 'cloud ambiguous' (NN output higher than boundary), in case of pixels which have been classified
    as WATER.
    Providing the NN cloud ambiguous lower boundary as user option allows a fine tuning of the pixel classification
    under certain conditions. The default value is 2.0.
</p>

<p class="i1">
    <b>NN cloud ambiguous/sure separation value (applied on WATER): </b><br>
    The boundary of the neural network output value where pixels are regarded as either 'cloud ambiguous' (NN output
    lower than boundary) or 'cloud sure' (NN output higher than boundary), in case of pixels which have been classified
    as WATER.
    Providing the NN cloud ambiguous/sure separation value as user option allows a fine tuning of the pixel
    classification under certain conditions. The default value is 3.7.
</p>

<p class="i1">
    <b>NN cloud sure/snow separation value (applied on WATER): </b><br>
    The boundary of the neural network output value where pixels are regarded as either 'cloud sure' (NN output lower
    than boundary) or 'snow' (NN output higher than boundary), in case of pixels which have been classified
    as WATER.
    Providing the NN cloud sure / snow separation value as user option allows a fine tuning of the pixel classification
    under certain conditions. The default value is 4.05.
</p>

<p class="i1">
    <b>NN cloud ambiguous lower boundary (applied on LAND): </b><br>
    The boundary of the neural network output value where pixels are regarded as either clear (NN output lower
    than boundary) or 'cloud ambiguous' (NN output higher than boundary), in case of pixels which have been classified
    as LAND.
    Providing the NN cloud ambiguous lower boundary as user option allows a fine tuning of the pixel classification
    under certain conditions. The default value is 1.1.
</p>

<p class="i1">
    <b>NN cloud ambiguous/sure separation value (applied on LAND): </b><br>
    The boundary of the neural network output value where pixels are regarded as either 'cloud ambiguous' (NN output
    lower than boundary) or 'cloud sure' (NN output higher than boundary), in case of pixels which have been classified
    as LAND.
    Providing the NN cloud ambiguous/sure separation value as user option allows a fine tuning of the pixel
    classification under certain conditions. The default value is 2.7.
</p>

<p class="i1">
    <b>NN cloud sure/snow separation value (applied on LAND): </b><br>
    The boundary of the neural network output value where pixels are regarded as either 'cloud sure' (NN output lower
    than boundary) or 'snow' (NN output higher than boundary), in case of pixels which have been classified
    as LAND.
    Providing the NN cloud sure / snow separation value as user option allows a fine tuning of the pixel classification
    under certain conditions. The default value is 4.6.
</p>

<p class="i1">
    <b>Compute cloud shadow: </b><br>
    If set, a cloud shadow is computed and added to the pixel classification. The default value is 'true'.
</p>

<p class="i1">
    <b>Compute a cloud buffer: </b><br>
    If set, a cloud buffer of certain width is computed and added to the pixel classification. The default value is 'true'.
</p>

<p class="i1">
    <b>Width of cloud buffer (# of pixels): </b><br>
    If a cloud buffer is computed, the buffer width (in # of pixels around the cloudy reference pixel) can be specified.
    The default value is '2'.
</p>

<h3>The Processing Result</h3>
The Idepix classification result is written into the target product as a flag band named 'pixel_classif_flags'.
This band holds integer values which for Envisat MERIS follow the flag coding shown below.

<p align="center">
    <img src="images/MerisFlagCoding.png" border="0">
</p>
<br>

The target product also provides a corresponding flag mask to visualize the pixel classification through the
SNAP Mask Manager:

<p align="center">
    <img src="images/MerisMaskManager.png" border="0">
</p>


<hr>
</body>
</html>